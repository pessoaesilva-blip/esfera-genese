<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Esfera Gênese - Laboratory</title>
<style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; }
</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
const scene = new THREE.Scene();

// Câmera
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.set(0, 5, 15);

// Renderizador
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.physicallyCorrectLights = true;
renderer.outputEncoding = THREE.sRGBEncoding;
document.body.appendChild(renderer.domElement);

// Luz do Sol
const sunLight = new THREE.DirectionalLight(0xffffff, 3);
sunLight.position.set(10, 20, 10);
scene.add(sunLight);

// Luz ambiente
const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);
scene.add(ambientLight);

// Céu (meia esfera interna)
const skyGeometry = new THREE.SphereGeometry(200, 64, 64, 0, Math.PI * 2, 0, Math.PI / 2);
const skyMaterial = new THREE.MeshBasicMaterial({
    color: 0x87ceeb,
    side: THREE.BackSide
});
const sky = new THREE.Mesh(skyGeometry, skyMaterial);
scene.add(sky);

// Solo
const groundGeometry = new THREE.CircleGeometry(200, 64);
const groundMaterial = new THREE.MeshStandardMaterial({
    color: 0x228B22,
    roughness: 0.8
});
const ground = new THREE.Mesh(groundGeometry, groundMaterial);
ground.rotation.x = -Math.PI / 2;
scene.add(ground);

// =======================
// ESFERA FLUTUANTE COM RELÓGIO
// =======================

// Grupo para unir esfera + tela
const orbGroup = new THREE.Group();
scene.add(orbGroup);

// Esfera principal
const screenGeometry = new THREE.SphereGeometry(
    3.05, 
    64, 
    64, 
    Math.PI * 0.4, 
    Math.PI * 0.2, 
    Math.PI * 0.45, 
    Math.PI * 0.1
);
const screenMaterial = new THREE.MeshStandardMaterial({
    map: texture,
    emissive: new THREE.Color(0x00ffff),
    emissiveIntensity: 3,
    metalness: 0.6,
    roughness: 0.1
});
const orb = new THREE.Mesh(orbGeometry, orbMaterial);
orbGroup.add(orb);

const glowGeometry = new THREE.SphereGeometry(3.3, 64, 64);
const glowMaterial = new THREE.MeshBasicMaterial({
    color: 0x00ffff,
    transparent: true,
    opacity: 0.08
});
const glow = new THREE.Mesh(glowGeometry, glowMaterial);
orbGroup.add(glow);

// Canvas para relógio
const canvas = document.createElement("canvas");
canvas.width = 512;
canvas.height = 256;
const context = canvas.getContext("2d");

const texture = new THREE.CanvasTexture(canvas);

const screenMaterial = new THREE.MeshStandardMaterial({
    map: texture,
    emissive: new THREE.Color(0x00ffff),
    emissiveIntensity: 2,
    metalness: 0.4,
    roughness: 0.1
});

const screenGeometry = new THREE.PlaneGeometry(4, 2);
const screen = new THREE.Mesh(screenGeometry, screenMaterial);
screen.position.set(0, 0, 2.95);
orbGroup.add(screen);

// Posição inicial
orbGroup.position.set(0, 7, -12);

// Atualiza relógio
function updateClock() {
    const now = new Date();
    const time = now.toLocaleTimeString();

    context.fillStyle = "black";
    context.fillRect(0, 0, canvas.width, canvas.height);

    context.fillStyle = "#00ffff";
    context.font = "bold 90px Arial";
    context.textAlign = "center";
    context.fillText(time, canvas.width / 2, 160);

    texture.needsUpdate = true;
}

setInterval(updateClock, 1000);
updateClock();

// Ajuste de tela
window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});

// Animação
function animate() {
    requestAnimationFrame(animate);

    const time = Date.now() * 0.002;

    orbGroup.position.y = 6 + Math.sin(time) * 0.8;
    orbGroup.rotation.y += 0.005;

    renderer.render(scene, camera);
}

animate();
</script>

</body>
</html>
